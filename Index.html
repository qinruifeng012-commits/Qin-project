<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½ è¿˜å¥½å— - To å¼ å½¦ç†™</title>
    
    <style>
        /* ================== CSS æ ·å¼ ================== */
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #F0F8FF;
            overflow: hidden; 
        }

        /* ä¸»å®¹å™¨ */
        #main-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        h1 {
            font-size: 28px;
            color: #333333;
            margin-bottom: 30px;
        }

        /* æŒ‰é’®æ ·å¼ */
        button {
            width: 220px;
            height: 50px;
            font-size: 18px;
            color: white;
            background-color: #007AFF;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: 500;
        }
        button:hover {
            background-color: #005bb5;
        }

        /* ================== åŠ¨ç”»å®šä¹‰ ================== */
        @keyframes popup-appear {
            from {
                opacity: 0;
                transform: scale(0.1); /* ä»æå°çš„ç‚¹å¼€å§‹ */
            }
            to {
                opacity: 1;
                transform: scale(1); /* æ”¾å¤§åˆ°æ­£å¸¸å¤§å° */
            }
        }

        /* ================== å¼¹çª—æ ·å¼ ================== */

        /* éšæœºå¼¹çª—çš„é€šç”¨æ ·å¼ */
        .popup {
            position: absolute;
            font-size: 14px;
            color: #333333;
            border-radius: 12px; 
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 5; 
            text-align: center;
            max-width: 220px;
            min-height: 70px; 
            transition: opacity 0.3s;
            cursor: grab;
            display: flex; 
            flex-direction: column;
            overflow: hidden; 
            /* ç¡®ä¿å…ƒç´ ä¸­å¿ƒç‚¹æ˜¯ç¼©æ”¾çš„åŸºç‚¹ */
            transform-origin: center center; 
        }

        /* åŠ¨ç”»è§¦å‘ç±»ï¼šä»…å¯¹éšæœºå¼¹çª—æ·»åŠ åŠ¨ç”» */
        .popup-animate {
            animation: popup-appear 0.3s ease-out forwards; /* 0.3ç§’åŠ¨ç”»ï¼Œç»“æŸæ—¶ä¿æŒçŠ¶æ€ */
        }

        /* å¼¹çª—æ ‡é¢˜æ ·å¼ */
        .popup-title {
            font-size: 12px; 
            font-weight: bold;
            color: #555555;
            background-color: rgba(255, 255, 255, 0.7); 
            padding: 5px 10px;
            border-top-left-radius: 10px; 
            border-top-right-radius: 10px;
            text-align: left;
            user-select: none; 
            cursor: grab; 
        }
        /* å¼¹çª—å†…å®¹æ ·å¼ */
        .popup-content {
            padding: 10px 15px; 
            flex-grow: 1; 
            display: flex; 
            align-items: center;
            justify-content: center;
            word-break: break-word; 
        }
        
        #center-modal-content {
            position: absolute; 
            background-color: white;
            padding: 0;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 300px;
            max-width: 90%;
            z-index: 1000; 
            cursor: grab;
            overflow: hidden; 
        }

        #center-modal-content:not([hidden]) {
            display: flex; 
            flex-direction: column;
        }

        #center-modal-title {
            font-size: 14px;
            font-weight: bold;
            color: #555555;
            background-color: #f0f0f0; 
            padding: 8px 15px;
            text-align: left;
            user-select: none;
            cursor: grab;
            flex-shrink: 0; 
        }

        #center-modal-body {
            padding: 20px 30px 30px; 
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #modal-content-p {
            font-size: 18px;
            font-weight: 600;
            color: #333333;
            margin-bottom: 25px;
        }
    </style>
</head>
<body>

    <div id="main-box">
        <h1>ä½ è¿˜å¥½å—ğŸ‘€</h1>
        <button id="startButton">æˆ‘æ˜¯æŒ‰é’®ï¼Œè¯·ç‚¹å‡»æˆ‘</button>
    </div>

    <div id="center-modal-content" hidden>
        <div id="center-modal-title">To å¼ åŒå­¦</div>
        <div id="center-modal-body">
            <p id="modal-content-p">è¯·è®°ä½ä½ æ°¸è¿œä¸æ˜¯å­¤å•ä¸€äººå‰è¡Œï¼Œæˆ‘æ°¸è¿œåœ¨è¿™é‡Œ (à¸‡ â€¢_â€¢)à¸‡</p>
            <button id="closeButton">å…³é—­æ‰€æœ‰å¼¹çª—ï¼Œç»§ç»­çƒ­çˆ±ç”Ÿæ´»ï¼</button>
        </div>
    </div>

    <script>
        /* ================== JavaScript é€»è¾‘ ================== */

        const Count_message = 50;       
        const Delay = 100;              
        let Message_counting = 0;     
        let timerId = null;           
        
        const messages = [
            "ä»Šå¤©è¿‡å¾—å¥½å—ï¼Ÿãƒ¾(â‰§â–½â–½*)o", "å¤©æ°”ä¸é”™å§ï¼Œæœ‰ä¸‹é›¨å—ï¼ŸğŸŒ§ï¸", "æœ‰æ²¡æœ‰å‡ºå»èµ°èµ°å•Šï¼Ÿ<(ï¿£ï¸¶ï¿£)â†—[GO!]",
            "è¦ä¸åˆ†äº«ä¸€ä¸‹ä½ æœ€è¿‘çœ‹çš„ä¹¦ï¼ŸğŸ“šğŸ“–", "å¤©å†·äº†ï¼Œæ˜¯ä¸æ˜¯è¦åŠ ä¸€ä»¶è¡£æœå•Šï¼Ÿâ„ï¸", "è®°å¾—å¤šå–æ°´ï¼ğŸ¥¤O(âˆ©_âˆ©)O",
            "ä¼šä¸ä¼šæƒ³æˆ‘å•Šï¼Ÿ", "æ¯å¤©éƒ½è¦è®°å¾—é”»ç‚¼å“¦ï¼o(^â–½^)o", "æœ‰æ²¡æœ‰å¥½å¥½åƒé¥­ï¼ŸğŸ‘€æ—©é¥­ä¹Ÿæ˜¯è¦å¥½å¥½åƒçš„å“¦o(ã€ƒï¼¾â–½â–½ã€ƒ)o",
            "æœ‰é‡åˆ°ä»€ä¹ˆçƒ¦å¿ƒäº‹å—ï¼Ÿè¯·ä¸€å®šè®°ä½ä¼šå¥½èµ·æ¥ğŸ’•â•°(*Â°â–½Â°*)â•¯", "ä»Šå¤©çš„å¤•é˜³ç¾ä¸ç¾ï¼Ÿå¿«æ‹ç»™æˆ‘çœ‹çœ‹ï¼ğŸŒ‡(âËƒá†ºË‚)",
            "æ–°çš„ä¸€å¤©ï¼Œä¹Ÿè¦å…ƒæ°”æ»¡æ»¡ï¼å†²é¸­ï¼ğŸš€v(ï¿£ï¸¶ï¿£)v", "å‘Šè¯‰ä½ ä¸€ä¸ªç§˜å¯†ï¼šä½ ç¬‘èµ·æ¥æœ€å¥½çœ‹ï¼(â˜… Ï‰ â˜…)",
            "æœ‰æ²¡æœ‰ä»€ä¹ˆå°æ„¿æœ›ä»Šå¤©å®ç°äº†å‘¢ï¼Ÿâœ¨(ï¾‰â—•ãƒ®ãƒ®)ï¾‰*:ï½¥ï¾Ÿâœ§", "ä»Šå¤©ä¹Ÿæ˜¯åŠªåŠ›å‘å…‰çš„å°å¤ªé˜³å‘¢ï¼â˜€ï¸âœ§(â‰– â—¡ â‰–âœ¿)",
            "è®°å¾—ç»™å®¶é‡Œçš„èŠ±èŠ±æµ‡æµ‡æ°´å“¦ï¼ğŸŒ¼(â—Â´Ï‰ï½€â—)", "åˆ†äº«ä¸€ä¸ªä»Šå¤©é‡åˆ°çš„å°ç¡®å¹¸ç»™æˆ‘å§ï¼ğŸ€(à¹‘Â¯â—¡Â¯à¹‘)",
            "æœ‰æ²¡æœ‰è¢«ä»€ä¹ˆæœ‰è¶£çš„äº‹æƒ…é€—ç¬‘ï¼ŸğŸ˜†å“ˆå“ˆå“ˆï¼", "ä½ åŠªåŠ›çš„æ ·å­ï¼ŒçœŸçš„è¶…è¿·äººçš„ï¼ğŸ˜‰(â˜…^O^â˜…)",
            "å¤©æ°”å¹²ç‡¥ï¼Œè®°å¾—æ¶‚æ¶¦å”‡è†å“¦ï¼ğŸ‘„", "ä»Šå¤©æœ‰æ²¡æœ‰å­¦åˆ°ä»€ä¹ˆæ–°çŸ¥è¯†å‘€ï¼ŸğŸ“(ãƒ»Ï‰<)â˜…",
            "é¢œè¡¨æƒ…çº¯äº«ç‰ˆ{(âœ¿â— â€¿â— ) (*â‰§ï¸¶â‰¦))(ï¿£â–½â–½* )ã‚ (pâ‰§wâ‰¦q)}", "æ™šä¸Šè¦æ—©ç‚¹ä¼‘æ¯ï¼Œä¸è¦å½“å¤œçŒ«å­å“¦ï¼ğŸŒ™(ï½ï¹ƒï½)~zZ",
            "ä»Šå¤©æœ‰æ²¡æœ‰å¯¹è‡ªå·±å¥½ä¸€ç‚¹ï¼Ÿ (Â´,,â€¢Ï‰â€¢,,)â™¡", "ä¸ç®¡å‘ç”Ÿä»€ä¹ˆï¼Œæˆ‘éƒ½ä¼šåœ¨è¿™é‡Œä¸ºä½ åŠ æ²¹ï¼ğŸ‰â•°(Â°â–½Â°)â•¯",
            "æ—©ä¸Šèµ·åºŠåæœ‰æ²¡æœ‰ä¼¸ä¸ªå¤§å¤§çš„æ‡’è…°å‘€ï¼ŸğŸŒâ•°(ï¿£â–½ï¿£)â•­", "å‚æ™šçš„é£æ¸©æŸ”å—ï¼Ÿæœ‰æ²¡æœ‰å¸¦æ¥ç§‹å¤©çš„å‘³é“ï¼ŸğŸ‚(ï½ï¿£â–½â–½)ï½",
            "å¦‚æœä»Šå¤©æœ‰ç‚¹è¾›è‹¦ï¼Œé‚£è¯´æ˜ä½ åœ¨ä¸Šå¡è·¯å‘€ï¼åŠ æ²¹ï¼ğŸ’ª(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§", "ä»Šå¤©æœ‰æ²¡æœ‰å“ªä¸ªç¬é—´ï¼Œè§‰å¾—è‡ªå·±è¶…çº§å‰å®³ï¼ŸğŸ‘‘(â˜… Ï‰ â˜…)",
            "ç¡å‰å¯ä»¥æƒ³æƒ³å¼€å¿ƒçš„äº‹ï¼Œè¿™æ ·æ¢¦éƒ½ä¼šæ˜¯ç”œçš„å“¦ï¼ğŸ­(âœ¿â— â€¿â— )", "ä½ çŸ¥ä¸çŸ¥é“ï¼Œä½ å¯¹æˆ‘è€Œè¨€æ˜¯éå¸¸éå¸¸é‡è¦çš„äººï¼ğŸ’•(â—'â—¡'â—)",
        ];

        const backgroudColors = [
            "#FFDAB9", "#B0E0E6", "#C1FFC1", 
            "#FFE4B5", "#F0E68C", "#FFFACD", 
            "#D8BFD8", "#FFB6C1", "#E6E6FA", 
        ];

        const startButton = document.getElementById('startButton');
        const mainBox = document.getElementById('main-box');
        const centerModalContent = document.getElementById('center-modal-content'); 
        const closeButton = document.getElementById('closeButton');
        const body = document.body;
        const centerModalTitle = document.getElementById('center-modal-title');
        
        // ================== å¯æ‹–åŠ¨æ•ˆæœ ==================

        function makeElementDraggable(element, handle = element) { 
            let pos3 = 0, pos4 = 0; 
            let isDragging = false; 

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                
                // å¦‚æœæ˜¯æŒ‰é’®è¢«ç‚¹å‡»ï¼Œä¸å¼€å§‹æ‹–åŠ¨
                if (e.target.tagName === 'BUTTON') return;

                isDragging = true;
                pos3 = e.clientX;
                pos4 = e.clientY;
                
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
                
                element.style.zIndex = 9999; 
            }

            function elementDrag(e) {
                if (!isDragging) return;

                e = e || window.event;
                e.preventDefault();
                
                let pos1 = pos3 - e.clientX; 
                let pos2 = pos4 - e.clientY; 
                pos3 = e.clientX; 
                pos4 = e.clientY; 
                
                let newTop = element.offsetTop - pos2;
                let newLeft = element.offsetLeft - pos1;
                
                // è¾¹ç•Œé™åˆ¶
                newTop = Math.max(0, Math.min(newTop, window.innerHeight - element.offsetHeight));
                newLeft = Math.max(0, Math.min(newLeft, window.innerWidth - element.offsetWidth));

                element.style.top = newTop + "px";
                element.style.left = newLeft + "px";
            }

            function closeDragElement() {
                isDragging = false;
                
                document.onmouseup = null;
                document.onmousemove = null;
                
                if (element.id === 'center-modal-content') {
                    element.style.zIndex = 1000;
                } else {
                    element.style.zIndex = 5;
                }
            }
            
            // å°†æ‹–åŠ¨äº‹ä»¶ç»‘å®šåˆ°æŒ‡å®šçš„ handle å…ƒç´ ä¸Š
            handle.onmousedown = dragMouseDown;
        }

        // ================== æ ¸å¿ƒåŠŸèƒ½å‡½æ•° ==================

        function createPopup() {
            if (Message_counting >= Count_message) {
                clearInterval(timerId); 
                createCenterPopup();
                return;
            }
            
            Message_counting++;

            const msg = messages[Math.floor(Math.random() * messages.length)];
            const bgColor = backgroudColors[Math.floor(Math.random() * backgroudColors.length)];
            
            const popup = document.createElement('div');
            popup.className = 'popup popup-animate';
            popup.style.backgroundColor = bgColor;
            
            // æ·»åŠ æ ‡é¢˜æ 
            const titleBar = document.createElement('div');
            titleBar.className = 'popup-title';
            titleBar.textContent = 'To å¼ åŒå­¦';
            popup.appendChild(titleBar);

            // æ·»åŠ å†…å®¹åŒºåŸŸ
            const contentDiv = document.createElement('div');
            contentDiv.className = 'popup-content';
            contentDiv.textContent = msg;
            popup.appendChild(contentDiv);
            
            const vpWidth = window.innerWidth;
            const vpHeight = window.innerHeight;

            const x = Math.floor(Math.random() * (vpWidth - 250)) + 20; 
            const y = Math.floor(Math.random() * (vpHeight - 150)) + 20; 

            popup.style.left = `${x}px`;
            popup.style.top = `${y}px`;

            // ä½¿éšæœºå¼¹çª—å¯æ‹–åŠ¨ï¼Œç»‘å®šåˆ°æ•´ä¸ª popup å…ƒç´ 
            makeElementDraggable(popup); 

            body.appendChild(popup);
        }

        function createCenterPopup() {
            mainBox.style.display = 'none'; 
            
            // å…³é”®ä¿®æ”¹ï¼šç§»é™¤ hidden å±æ€§ä»¥æ˜¾ç¤ºå¼¹çª—
            centerModalContent.removeAttribute('hidden');
            const modalRect = centerModalContent.getBoundingClientRect();
            
            // è®¡ç®—ä½ç½®å®ç°å±…ä¸­
            centerModalContent.style.left = `${(window.innerWidth - modalRect.width) / 2}px`;
            centerModalContent.style.top = `${(window.innerHeight - modalRect.height) / 2}px`;

            // ä½¿ä¸­å¿ƒå¼¹çª—å¯æ‹–åŠ¨ï¼Œåªé€šè¿‡æ ‡é¢˜æ æ‹–åŠ¨
            makeElementDraggable(centerModalContent, centerModalTitle); 
        }

        function startPopups() {
            mainBox.style.display = 'none'; 
            
            document.querySelectorAll('.popup').forEach(p => p.remove());
            
            // ç¡®ä¿éšè—ä¸­å¿ƒå¼¹çª— (å¦‚æœåœ¨ä¸Šä¸€æ¬¡è¿è¡Œä¸­æœªå…³é—­)
            centerModalContent.setAttribute('hidden', '');
            Message_counting = 0;

            timerId = setInterval(createPopup, Delay);
        }

        function clearAllPopups() {
            if (timerId) {
                clearInterval(timerId);
            }
            
            // å…³é”®ä¿®æ”¹ï¼šæ·»åŠ  hidden å±æ€§ä»¥éšè—å¼¹çª—
            centerModalContent.setAttribute('hidden', '');
            
            document.querySelectorAll('.popup').forEach(p => {
                p.style.opacity = '0'; 
                setTimeout(() => p.remove(), 300); 
            });
            
            mainBox.style.display = 'flex';
            Message_counting = 0;
        }

        // ================== äº‹ä»¶ç›‘å¬ ==================
        startButton.addEventListener('click', startPopups);
        closeButton.addEventListener('click', clearAllPopups);

        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°å±…ä¸­æ¨¡æ€æ¡†
        window.addEventListener('resize', () => {
             // ä»…å½“å¼¹çª—æ˜¾ç¤ºæ—¶æ‰é‡æ–°è®¡ç®—ä½ç½®
             if (!centerModalContent.hasAttribute('hidden')) {
                 const modalRect = centerModalContent.getBoundingClientRect();
                 centerModalContent.style.left = `${(window.innerWidth - modalRect.width) / 2}px`;
                 centerModalContent.style.top = `${(window.innerHeight - modalRect.height) / 2}px`;
             }
        });
        
    </script>

</body>
</html>